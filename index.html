<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LDB Paspor OCR - Gemini AI</title>
  <link rel="stylesheet" href="style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
</head>
<body>
  <!-- Background Effects -->
  <div class="bg-effects">
    <div class="blob blob-1"></div>
    <div class="blob blob-2"></div>
  </div>

  <div class="container">
    
    <!-- Settings Button -->
    <button id="headerSettingsBtn" class="header-settings-btn" title="API Settings">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"/>
        <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
      </svg>
    </button>

    <!-- Header -->
    <header class="header">
      <div class="badge">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09z"/>
        </svg>
        <span>Powered by Sabnreview</span>
      </div>
      
      <h1 class="title">
        <span class="gradient-text">LDB Paspor</span>
        <span>OCR</span>
      </h1>
      
      <p class="subtitle">
        Extract passport data automatically with AI.
        <span class="highlight">Fast & Accurate</span>
      </p>
    </header>

    <!-- API Configuration Section -->
    <div class="api-section" id="apiSection">
      <div class="api-card">
        <div class="api-header">
          <div class="api-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 5.25a3 3 0 013 3m3 0a6 6 0 01-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1121.75 8.25z"/>
            </svg>
          </div>
          <div>
            <h3>API Configuration</h3>
            <p>Enter your Google AI API key</p>
          </div>
        </div>
        
        <div class="api-form">
          <div class="input-group">
            <label>API Key</label>
            <div class="input-wrapper">
              <input type="password" id="apiKey" placeholder="AIzaSy...">
              <button type="button" id="toggleKey" class="toggle-btn">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"/>
                  <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                </svg>
              </button>
            </div>
          </div>
          
          <button id="saveApiBtn" class="btn btn-primary">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
            Save & Continue
          </button>
        </div>
        
        <div class="api-help">
          <h4>üìñ How to Get API Key:</h4>
          <ol>
            <li>Go to <a href="https://aistudio.google.com/apikey" target="_blank">Google AI Studio</a></li>
            <li>Click "Create API Key" or "Get API Key"</li>
            <li>Copy the key (starts with <code>AIzaSy...</code>)</li>
            <li><strong>FREE:</strong> 10 requests/minute, 20/day</li>
          </ol>
          <div style="margin-top: 1rem; padding: 0.75rem; background: rgba(168, 85, 247, 0.1); border: 1px solid rgba(168, 85, 247, 0.2); border-radius: 0.5rem;">
            <p style="font-size: 0.75rem; color: var(--purple-300);">
              üí° <strong>Tip:</strong> Model used: <code style="background: rgba(0,0,0,0.3); padding: 0.2rem 0.4rem; border-radius: 0.25rem;">gemini-2.5-flash</code> (latest & fastest)
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Application -->
    <div class="main-app hidden" id="mainApp">
      
      <!-- Upload Area -->
      <div class="upload-area" id="uploadArea">
        <div class="upload-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="url(#gradient)" stroke-width="1.5">
            <defs>
              <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" stop-color="#a855f7"/>
                <stop offset="100%" stop-color="#06b6d4"/>
              </linearGradient>
            </defs>
            <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"/>
          </svg>
        </div>
        <h3>Upload Passport Photo</h3>
        <p>Drag & drop or <span class="text-purple">click to browse</span></p>
        <div class="file-types">
          <span class="file-badge">JPG</span>
          <span class="file-badge">PNG</span>
          <span class="file-badge">WebP</span>
        </div>
      </div>
      <input type="file" id="fileInput" accept="image/*" multiple hidden>

      <!-- Action Buttons -->
      <div class="actions hidden" id="actionButtons">
        <button id="exportBtn" class="btn btn-success">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"/>
          </svg>
          üìä Export Excel
        </button>
        <button id="resetBtn" class="btn btn-danger">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"/>
          </svg>
          üóëÔ∏è Reset All
        </button>
      </div>

      <!-- Results Table Section -->
      <div class="results-section hidden" id="resultsSection">
        <h3 class="section-title">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25zM6.75 12h.008v.008H6.75V12zm0 3h.008v.008H6.75V15zm0 3h.008v.008H6.75V18z"/>
          </svg>
          Extracted Passport Data (<span id="fileCount">0</span>)
        </h3>
        
        <div class="table-container">
          <table id="resultsTable">
            <thead>
              <tr>
                <th>No</th>
                <th>File</th>
                <th>Passport No</th>
                <th>Full Name</th>
                <th>Date of Birth</th>
                <th>Place of Birth</th>
                <th>Date of Issue</th>
                <th>Date of Expiry</th>
                <th>Nationality</th>
                <th>Gender</th>
                <th>Issuing Authority</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody id="resultsBody">
              <!-- Data akan diisi oleh JavaScript -->
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast hidden" id="toast">
      <span class="toast-icon" id="toastIcon">‚úì</span>
      <span id="toastMessage">Success!</span>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay hidden" id="loadingOverlay">
      <div class="loading-card">
        <div class="spinner"></div>
        <h3 id="loadingTitle">Analyzing with Gemini AI...</h3>
        <p id="loadingSubtitle">Please wait, extracting passport data...</p>
      </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
      <p>Created by <span class="text-purple">sabnreview</span></p>
      <p style="font-size: 0.75rem; color: rgba(255,255,255,0.3); margin-top: 0.5rem;">
        Powered by Google 2.5 | Export to Excel (.xlsx)
      </p>
    </footer>
  </div>

  <!-- SheetJS Library for Excel Export -->
  <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>
  
  <!-- Application Script -->
  <script src="app.js"></script>
</body>

</html>
